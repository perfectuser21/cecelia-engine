# PRD: Task Checkpoint 清理逻辑缺失修复

## 背景

当前 /dev 工作流使用 Task Checkpoint 追踪 11 个步骤的进度，但在 Step 11 Cleanup 完成后，任务列表没有被清理，导致任务残留在用户界面上。

## 问题

**现象**：/dev 工作流完成后（PR 已合并），Task 列表仍然显示旧的任务：
- #28 写测试 (in_progress)
- #29 质检 (pending)
- #30 提交 PR (pending)
- #31 CI 监控 (pending)
- #32 Learning 记录 (pending)
- #33 清理 (pending)

**根本原因**：
1. `skills/dev/steps/11-cleanup.md` 缺少"清理任务列表"的步骤
2. 文档只说明了如何创建和更新任务，没有说明如何清理

## 方案

在 `skills/dev/steps/11-cleanup.md` 的"完成"部分之前，添加"清理任务列表"章节：

```markdown
## 清理任务列表（CRITICAL）

**在完成前，必须清理 Task Checkpoint 创建的任务**：

\`\`\`javascript
// 获取所有任务
const tasks = TaskList()

// 将所有任务标记为 completed（而不是 deleted，保留历史记录）
tasks.forEach(task => {
  if (task.status !== 'completed') {
    TaskUpdate({ taskId: task.id, status: 'completed' })
  }
})
\`\`\`

**为什么要清理**：
- 任务列表是临时的进度追踪工具
- 不清理会导致任务列表残留，影响下次 /dev 流程
- 用户界面会显示已完成的旧任务

**清理时机**：Step 11 Cleanup 结束前（在删除 .dev-mode 之后）
```

## 验收标准

- [ ] `skills/dev/steps/11-cleanup.md` 添加"清理任务列表"章节
- [ ] 文档说明清理逻辑、原因和时机
- [ ] 下次运行 /dev 工作流，完成后任务列表应被清理
