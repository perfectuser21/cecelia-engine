---
id: dod-phase2-snapshot
version: 1.0.0
created: 2026-01-22
updated: 2026-01-22
changelog:
  - 1.0.0: 初始版本
---

# DoD - Phase 2: PRD/DoD 历史版本化（快照）

## 验收标准

### 1. 快照脚本
- [x] `scripts/devgate/snapshot-prd-dod.sh` 实现
  Test: tests/hooks/pr-gate-phase2.test.ts
- [x] 复制 .prd.md 和 .dod.md 到 .history/
  Test: tests/hooks/pr-gate-phase2.test.ts
- [x] 文件名包含 PR 号和时间戳
  Test: tests/hooks/pr-gate-phase2.test.ts

### 2. 列出快照
- [x] `scripts/devgate/list-snapshots.sh` 实现
  Test: tests/hooks/pr-gate-phase2.test.ts
- [x] 按时间倒序显示
  Test: tests/hooks/pr-gate-phase2.test.ts

### 3. 查看快照
- [x] `scripts/devgate/view-snapshot.sh` 实现
  Test: tests/hooks/pr-gate-phase2.test.ts
- [x] 支持按 PR 号查看
  Test: tests/hooks/pr-gate-phase2.test.ts

### 4. Hook 集成
- [x] `hooks/pr-gate-v2.sh` PR 创建后调用快照脚本
  Test: contract:H2-009

### 5. 回归契约更新
- [x] 新增 H2-009（PRD/DoD 快照）
  Test: manual:rci-review

### 6. 质量验收
- [x] npm run qa 通过
  Test: contract:C2-001
- [x] bash -n 所有 .sh 文件通过
  Test: contract:C3-001
