# DoD - v8.0 /dev 流程简化升级

## 验收标准

### Phase 0: 回归层骨架 (核心)

- [x] FEATURES.md 存在，定义全量边界 Evidence: `C1`
- [x] package.json 添加 `npm run qa` 脚本 Evidence: `C1`
- [x] tests/hooks/branch-protect.test.ts 存在 Evidence: `C2`
- [x] tests/hooks/pr-gate.test.ts 存在 Evidence: `C2`
- [x] tests/hooks/project-detect.test.ts 存在 Evidence: `C2`

### Phase 1: PR Gate 分层

- [x] pr-gate-v2.sh 支持 `--mode=pr` / `--mode=release` Evidence: `C3`
- [x] hooks/pr-gate.sh 已删除 Evidence: `C4`
- [x] hooks/subagent-quality-gate.sh 已删除 Evidence: `C4`
- [x] .claude/settings.json 无 subagent-quality-gate 配置 Evidence: `C5`

### 文档更新

- [x] skills/dev/SKILL.md 流程图更新（移除 Subagent Loop）Evidence: `C6`
- [x] skills/dev/steps/07-quality.md 简化为只 L1 Evidence: `C6`

### 版本 & 发布

- [x] package.json 版本升级到 8.0.0 Evidence: `C7`
- [x] CHANGELOG.md 添加 v8.0.0 条目 Evidence: `C7`
- [x] npm run qa 通过 Evidence: `C8`

---

## Evidence 说明

| Code | 验证方式 |
|------|----------|
| C1 | 文件存在检查 |
| C2 | vitest 测试通过 |
| C3 | `bash pr-gate-v2.sh --mode=pr` 执行成功 |
| C4 | 文件不存在检查 |
| C5 | settings.json 无 subagent 相关配置 |
| C6 | 文档 diff 检查 |
| C7 | 版本号/CHANGELOG 格式检查 |
| C8 | `npm run qa` 退出码 0 |

---

## Out of Scope

- Phase 2 (夜间无人值守) - 后续版本
- Phase 3 (L2/L3 自动化) - 后续版本
- 验收包生成机制 - 后续版本
- 风险分级规则 - 后续版本
