# DoD: 流程优化 - 移除空盒子 + Preflight 智能化

## 验收清单

### P0: 移除认知污染源

- [x] 删除 L3-fast 脚本 (`scripts/devgate/l3-fast.sh`)
  - Test: manual:文件已不存在

- [x] 从 package.json 移除 lint/format 占位符
  - Test: manual:grep "TODO: add" package.json 无结果

- [x] 更新文档标注 AI Review 为 "Disabled"
  - Test: manual:.tmp-flow-analysis.md 包含 "Disabled" 标记

### P1: Preflight 智能化

- [x] 重写 ci-preflight.sh 为智能跳过逻辑
  - Test: manual:脚本只检查新鲜度，不跑测试

- [x] 实现新鲜度检查（< 5 分钟）
  - Test: manual:脚本包含 AGE < 300 逻辑

- [x] 实现 SHA 验证逻辑
  - Test: manual:脚本包含 SHA 匹配检查

- [x] 验证 Preflight 智能跳过工作正常
  - Test: manual:运行 qa:gate 后立即运行 ci-preflight.sh 通过

### 文档更新

- [x] 更新 .tmp-flow-analysis.md
  - Test: manual:文档反映新的 Preflight 逻辑

- [x] 更新 FLOW-AUDIT-REPORT.md（保持原样，这是审计报告）
  - Test: manual:报告记录了发现的问题

## QA Decision

参考: docs/QA-DECISION.md

- Decision: NO_RCI（流程优化，不涉及功能回归）
- Priority: P1（重要优化，提升开发效率）
- Tests: 主要为手动验证

## 完成标准

- L3-fast 相关代码完全移除
- ci-preflight.sh 实现智能跳过逻辑
- 文档准确反映新流程
- 所有测试通过
