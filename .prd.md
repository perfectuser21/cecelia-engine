---
id: prd-trust-layer
version: 1.0.0
created: 2026-01-23
updated: 2026-01-23
changelog:
  - 1.0.0: 初始版本
---

# PRD - Trust Layer 重建

Priority: P0

## 背景

系统存在严重的"信任破裂"：
- Hook / CI 环境不一致
- Hook 可绕过（gh api）
- Branch Protection 可绕过（个人仓库限制）
- 测试结果不可追踪
- 发布不可控

**后果**：系统不可预测、不可审计、不可复现、不可信。

## 目标

建立一个"绝对可信的系统"：
- **Predictable** (可预测)
- **Repeatable** (可复现)
- **Verifiable** (可验证)
- **Auditable** (可审计)

## Phase 1: Stop the Bleeding

- [x] P1-1: 修复仓库状态
- [x] P1-2: Branch Protection 分析（发现个人仓库限制）
- [x] P1-3: 统一测试入口 (gate:test) → CHECKPOINT-02 + 03
- [x] P1-4: 修复 Hook 证据采集 → CHECKPOINT-02 (artifacts/gate/)
- [x] P1-5: 隔离测试环境 → CHECKPOINT-04

## Phase 2: Build Trust Layer

- [x] P2-1: Branch Protection 配置（个人仓库限制已记录）
- [x] P2-2: 统一 Hook → 证据层 → CHECKPOINT-02 (artifacts/gate/)
- [x] P2-3: 发布链重建 → CHECKPOINT-06 (deploy 门禁)
- [x] P2-4: Gate v3 → CHECKPOINT-05 (统一入口 + 证据 + 隔离)

## 验收标准

- 本地/Hook/CI 结果完全一致
- 所有失败都有证据日志
- deploy 不可误触
- 整个 pipeline deterministic

完整 PRD 见: `features/trust-layer/PRD.md`
