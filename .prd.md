# PRD: 流程优化 - 移除空盒子 + Preflight 智能化

**优先级**: P0 + P1
**类型**: refactor
**估算**: 30 分钟

## 背景

审计发现三个问题：
1. **L3-fast 是空盒子**：只打印占位符，不检查任何东西，造成认知污染
2. **AI Review 未配置但流程说"有"**：误导用户以为有语义审查
3. **Preflight 重复跑测试**：qa:gate 刚跑完，Hook 又跑一遍，浪费 1.5 分钟

## 目标

### P0: 移除认知污染源
- 删除 L3-fast 脚本和相关 npm scripts
- 避免"假检查"污染流程认知

### P1: Preflight 智能化
- 改为只检查 .quality-gate-passed 新鲜度（5 分钟内）
- 验证 SHA 是否匹配 HEAD
- 不再重跑 typecheck/test

## 实施细节

1. **删除 L3-fast**
   - `rm scripts/devgate/l3-fast.sh`
   - 从 package.json 移除 `lint` 和 `format:check` 占位符

2. **重写 ci-preflight.sh**
   - 只检查新鲜度 + SHA，不跑 test

3. **更新 hooks/pr-gate-v2.sh**
   - Part 0.5 移除对 l3-fast.sh 的调用

4. **更新文档**
   - 标注 AI Review 为 "Disabled"
   - 移除 L3-fast 相关描述

## 收益

- **时间节省**: Hook 检查从 2 分钟降到 0.5 分钟（75% 提升）
- **认知清晰**: 只有 qa:gate 跑测试（唯一权威）
- **避免误导**: 空盒子功能明确标注状态
