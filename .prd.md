# PRD - CI grep -c Bug 修复

**需求来源**: PR #195 release CI 失败分析

---

## 问题描述

CI workflow 的 L4 Evidence Check 步骤中，grep -c 命令在找到 0 匹配时有 bug：

```yaml
# 当前（错误）
UNCHECKED=$(grep -c '\- \[ \]' .dod.md 2>/dev/null || echo "0")
```

**问题**: grep -c 找到 0 匹配时：
1. 输出 "0" 到 stdout
2. 返回 exit code 1 (表示未找到匹配)
3. `|| echo "0"` 触发，再输出 "0"
4. 结果：UNCHECKED="0\n0"，导致 `[ "$UNCHECKED" -eq 0 ]` 失败

**错误信息**:
```
/home/runner/.../sh: line 28: [: 0
0: integer expression expected
```

---

## 修复方案

```yaml
# 修复后
UNCHECKED=$(grep -c '\- \[ \]' .dod.md 2>/dev/null) || true
CHECKED=$(grep -c '\- \[x\]' .dod.md 2>/dev/null) || true
UNCHECKED=${UNCHECKED:-0}
CHECKED=${CHECKED:-0}
```

---

## 成功标准

- [ ] CI L4 Evidence Check 不再报 integer expression expected
- [ ] PR #195 release 流程能够通过
