# L2B Evidence - CI Bug Fix v11.29.0

## Summary

修复通过多 Subagent 并行分析发现的 13 个关键 CI bug：
- 3 CRITICAL: ci-passed依赖逻辑、SHA匹配、ai-review依赖
- 3 HIGH: 命令检测正则、机器引用正则、关键检查绕过
- 1 MEDIUM: 超时优化
- 5 LOW: 时间戳、DoD正则、SHA显示、配置标记、验证阻断

## 手动验证

- ✅ 版本号更新: 11.28.0 → 11.29.0
- ✅ CHANGELOG 已更新
- ✅ C1 修复: ci-passed 使用 gh CLI 动态验证
- ✅ C2 修复: SHA 双向前缀匹配
- ✅ C3 修复: ai-review 允许 ci-passed skipped
- ✅ H2-H3 修复: 正则表达式使用单词边界
- ✅ M1 修复: 超时优化（test 30min, contract-drift 5min）
- ✅ L2-L5 修复: DoD正则、SHA显示、配置标记、验证阻断

## 自动化测试

CI 测试覆盖：
- TypeCheck: `npm run typecheck`
- Unit Tests: `npm test`
- Build: `npm run build`
- Shell Scripts: `bash -n scripts/**/*.sh`
- Known Failures Protection (P0)
- Config Audit (P1)
- Impact Check (P1)
- Contract Drift Check

## Verification Commands

```bash
# 验证版本号
jq .version package.json
# Expected: "11.29.0"

# 验证 CHANGELOG
head -5 CHANGELOG.md
# Expected: ## [11.29.0] - 2026-02-03

# 验证 C1 修复
grep -A 5 "C1 FIX" .github/workflows/ci.yml
# Expected: 动态验证 regression-pr/release-check

# 验证 C2 修复
grep -A 5 "C2 FIX" scripts/devgate/l2b-check.sh
# Expected: 双向前缀匹配
```

## CI Run

Current commit: $(git rev-parse HEAD)
Branch: cp-ci-bug-fixes-all
PR: #465
3c0cb4ee509985af054c8f866ec2c6624da9f12d
